# OPS 运维平台代码结构和功能分析文档

## 项目概述

**项目名称：** OPS - 智能运营系统（Intelligent Operations System）

**项目描述：** 企业级运营管理平台，涵盖用户权限、任务调度、数据报表、配置管理、流程审批、审计监控、消息通知等核心功能。

**项目规模：**
| 指标 | 数量 |
|-----|-----|
| 后端Python文件 | 109个 |
| 前端JS/Vue文件 | 28个 |
| 数据库表 | 36张 |
| 后端应用模块 | 8个 |
| 前端功能模块 | 11个 |
| API接口 | 100+个 |

---

## 1. 项目整体架构

### 1.1 前后端技术栈

**后端技术栈：**
| 技术 | 版本 | 用途 |
|-----|------|-----|
| Django | 4.2 LTS | Web框架 |
| Django REST Framework | - | REST API |
| MySQL | 8.0 | 主数据库 |
| Redis | 7.0 | 缓存和消息队列 |
| Celery | 5.3.6 | 异步任务队列 |
| Celery Beat | - | 定时任务调度 |
| djangorestframework-simplejwt | - | JWT认证 |
| python-social-auth | - | SSO集成 |
| pyotp | - | MFA多因素认证 |
| drf-spectacular | - | API文档(Swagger) |
| django-simple-history | - | 历史记录追踪 |
| django-fsm | - | 状态机 |
| Pandas/openpyxl | - | 数据处理 |

**前端技术栈：**
| 技术 | 版本 | 用途 |
|-----|------|-----|
| Vue | 3.x | 前端框架 |
| Vite | 5.x | 构建工具 |
| Vue Router | 4.x | 路由管理 |
| Pinia | - | 状态管理 |
| Axios | - | HTTP客户端 |
| Ant Design Vue | 4.x | UI组件库 |
| ECharts | 5.x | 图表库 |
| Less | - | CSS预处理 |
| NProgress | - | 进度条 |

### 1.2 项目目录结构

```
OPS/
├── backend/                          # Django 后端项目
│   ├── apps/                         # 8个应用模块
│   │   ├── auth/                     # 认证授权模块
│   │   ├── scheduler/                # 任务调度和工作流模块
│   │   ├── report/                   # 报表引擎模块
│   │   ├── config/                   # 配置管理模块
│   │   ├── workflow/                 # 审批流程模块
│   │   ├── audit/                    # 审计日志模块
│   │   ├── notification/             # 消息通知模块
│   │   └── common/                   # 公共工具和基类模块
│   ├── ops/                          # Django项目配置
│   │   ├── settings.py              # Django设置
│   │   ├── urls.py                  # URL路由配置
│   │   ├── celery.py                # Celery配置
│   │   ├── asgi.py                  # ASGI配置
│   │   └── wsgi.py                  # WSGI配置
│   ├── requirements.txt              # Python依赖
│   ├── manage.py                     # Django管理命令
│   └── Dockerfile                    # Docker镜像配置
├── frontend/                         # Vue 前端项目
│   ├── src/
│   │   ├── api/                      # API接口调用模块
│   │   ├── router/                   # 路由配置
│   │   ├── stores/                   # Pinia状态管理
│   │   ├── views/                    # 页面组件（11个功能模块）
│   │   ├── components/               # 公共组件库
│   │   ├── assets/                   # 静态资源和样式
│   │   ├── App.vue                   # 根组件
│   │   └── main.js                   # 入口文件
│   ├── package.json                  # NPM依赖
│   ├── vite.config.js               # Vite配置
│   ├── index.html                    # HTML入口
│   ├── nginx.conf                    # Nginx配置（生产部署）
│   └── Dockerfile                    # Docker镜像配置
├── config/                           # 配置文件目录
│   └── sys.ini                       # 系统配置文件
├── doc/                              # 项目文档
├── scripts/                          # 脚本工具
│   └── init.sql                      # 数据库初始化脚本
├── k8s/                              # Kubernetes配置
├── docker-compose.yml                # 本地开发Docker编排
├── docker-compose.prod.yml           # 生产Docker编排
└── README.md                         # 项目说明
```

### 1.3 Docker容器编排

系统包含6个服务容器：
1. **Backend** - Django API Server
2. **Celery Worker** - 任务执行器
3. **Celery Beat** - 定时任务调度器
4. **Frontend** - Vue应用（Nginx）
5. **MySQL** - 数据库
6. **Redis** - 缓存和消息队列

---

## 2. 后端模块详细分析

### 2.1 应用模块总览

| 模块 | 文件数 | 数据表 | 核心功能 | 状态 |
|-----|--------|--------|---------|------|
| auth | 14 | 5 | 用户认证、RBAC权限、SSO | 开发中 |
| scheduler | 11 | 6 | 定时任务、DAG工作流、监控告警 | 开发中 |
| report | 10 | 4 | 多数据源、可视化配置、自动推送 | 规划中 |
| workflow | 8 | 5 | 可视化流程设计、多级审批 | 规划中 |
| audit | 6 | 6 | 操作日志、数据变更、系统监控 | 规划中 |
| config | 8 | 4 | 动态CRUD、版本控制、审批发布 | 规划中 |
| notification | 7 | 7 | 多渠道推送、模板管理 | 规划中 |
| common | 8 | 0 | 公共工具、基类、中间件 | 核心 |

### 2.2 用户认证与权限管理 (auth模块)

#### 数据模型

**User 表 (t_user)**
```
- id, username(唯一), email, phone, real_name, avatar
- password_hash (密码哈希)
- department (FK -> Department)
- is_active, is_staff, is_superuser
- mfa_secret, mfa_enabled (MFA多因素认证)
- data_scope: ALL/DEPT/DEPT_CHILD/SELF/CUSTOM
- SSO集成: wechat_work_id, dingtalk_id, feishu_id
- login_count, login_failed_count, locked_until
```

**Department 表 (t_department)**
```
- 树形结构: parent (自引用外键)
- name, code(唯一), leader(FK->User), sort_order
- 支持: get_ancestors(), get_descendants()
```

**Role 表 (t_role)**
```
- 树形结构: parent (自引用外键)
- name, code(唯一), description, sort_order, is_active
```

**Permission 表 (t_permission)**
```
- name, code, module
- type: menu/button/api
- path (路由或API路径), method (HTTP方法)
- 树形结构: parent (自引用外键)
```

**关系表：** UserRole, RolePermission

#### 核心功能

1. **认证流程**
   - 登录验证 → 生成JWT Tokens → 更新登录记录
   - Token刷新机制
   - MFA多因素认证（TOTP）

2. **RBAC权限系统**
   - 用户 → 角色 → 权限
   - 权限类型：menu(菜单)、button(按钮)、api(接口)
   - RBACPermission 权限类
   - @require_permission 装饰器

3. **数据权限**
   - ALL: 全部数据
   - DEPT: 本部门数据
   - DEPT_CHILD: 本部门及子部门
   - SELF: 仅本人数据
   - CUSTOM: 自定义范围

#### API接口

```
POST /api/v1/auth/login/           - 登录
POST /api/v1/auth/register/        - 注册
POST /api/v1/auth/logout/          - 登出
POST /api/v1/auth/refresh/         - 刷新令牌
POST /api/v1/auth/password/change/ - 修改密码
GET  /api/v1/auth/profile/         - 获取用户信息
PUT  /api/v1/auth/profile/         - 更新用户信息
POST /api/v1/auth/mfa/bind/        - 绑定MFA
POST /api/v1/auth/mfa/verify/      - 验证MFA

# SSO相关
GET  /api/v1/auth/sso/config/              - 获取SSO配置
GET  /api/v1/auth/sso/{provider}/login/    - SSO登录URL
POST /api/v1/auth/sso/{provider}/callback/ - SSO回调

# 用户/部门/角色管理
GET/POST   /api/v1/users/              - 用户列表/新建
GET/PUT/DELETE /api/v1/users/{id}/     - 用户详情/更新/删除
GET/POST   /api/v1/departments/        - 部门管理
GET/POST   /api/v1/roles/              - 角色管理
```

### 2.3 任务调度与工作流 (scheduler模块)

#### 数据模型

**Job 表 (t_job)**
```
- id, name, description
- job_type: http/shell/sql/python
- cron_expr (Cron表达式)
- config (JSON, 任务配置)
- retry_count, retry_interval, timeout
- status: enabled/disabled
- alert_on_failure, alert_on_timeout, alert_channels
```

**JobFlow 表 (t_job_flow)**
```
- id, name, description
- dag_config (JSON, DAG节点和边配置)
- cron_expr, status
```

**JobFlowNode 表 (t_job_flow_node)**
```
- flow (FK), job (FK), node_id
- position_x, position_y (可视化坐标)
- config (JSON)
```

**JobLog 表 (t_job_log)**
```
- job (FK), flow (FK), flow_instance_id, trace_id
- trigger_type: cron/manual/flow/retry
- status: pending/running/success/failed/timeout/cancelled/skipped
- start_time, end_time, duration
- input_params, result, error_msg
```

**FlowInstance 表 (t_flow_instance)**
```
- flow (FK), instance_id
- trigger_type, trigger_user
- status: pending/running/success/failed/partial/cancelled
- start_time, end_time, duration, result
```

**JobAlert 表 (t_job_alert)**
```
- job (FK), log (FK)
- alert_type: failure/timeout/threshold
- title, content, channels
- status: pending/sent/acknowledged/resolved
```

#### 核心功能

1. **定时任务执行**
   - Cron表达式调度
   - 多种执行类型（HTTP/Shell/SQL/Python）
   - 重试机制
   - 超时控制

2. **DAG工作流**
   - 可视化DAG配置
   - 节点依赖关系
   - 并行/串行执行
   - 部分成功支持

3. **SchedulerService**
   - sync_job_schedule(): 同步Job到Celery Beat
   - sync_flow_schedule(): 同步Flow到Celery Beat
   - _parse_cron_expr(): 解析Cron表达式

#### API接口

```
# 任务管理
GET/POST   /api/v1/jobs/              - 任务列表/创建
GET/PUT/DELETE /api/v1/jobs/{id}/     - 任务详情/更新/删除
POST /api/v1/jobs/{id}/execute/       - 手动执行
POST /api/v1/jobs/{id}/stop/          - 停止任务

# 工作流管理
GET/POST   /api/v1/job-flows/              - 工作流列表/创建
POST /api/v1/job-flows/{id}/execute/       - 执行工作流
GET  /api/v1/job-flows/{id}/instances/     - 工作流实例

# 日志和告警
GET  /api/v1/jobs/{id}/logs/               - 执行日志
GET  /api/v1/jobs/{id}/alerts/             - 告警列表
```

### 2.4 报表引擎 (report模块)

#### 数据模型

**DataSource 表 (t_datasource)**
```
- id, name, description
- type: mysql/postgresql/clickhouse/elasticsearch/mongodb
- host, port, database_name, username, password
- extra_config (JSON)
- status: active/inactive/error
```

**Report 表 (t_report)**
```
- id, name, description
- datasource (FK)
- query_config (JSON, SQL查询)
- display_type: table/line/bar/pie/funnel/gauge/heatmap/card/progress
- display_config (JSON, 图表配置)
- filter_config, format_config
- status: draft/published/archived
- is_public, view_count, enable_watermark
```

**ReportSubscription 表 (t_report_subscription)**
```
- report (FK), user (FK)
- schedule_type: daily/weekly/monthly
- channel: email/dingtalk/feishu/wechat
- export_format: excel/csv/pdf/image
```

**ReportFavorite 表 (t_report_favorite)**
```
- report (FK), user (FK)
```

#### 核心功能

- 多数据源连接和管理
- 9种可视化图表类型
- SQL查询配置
- 动态筛选条件
- 报表发布和分享
- 定时推送订阅

### 2.5 工作流审批 (workflow模块)

#### 数据模型

**WorkflowDefinition 表 (t_workflow_definition)**
```
- id, name, code(唯一), description
- nodes (JSON, 流程节点)
- edges (JSON, 节点连接)
- form_config (JSON, 审批表单)
- status: draft/published/archived
- version, callback_config
```

**ApprovalInstance 表 (t_approval_instance)**
```
- workflow (FK), title
- business_type, business_id
- form_data (JSON)
- current_node
- status: draft/pending/approved/rejected/cancelled/withdrawn
- applicant (FK), urgency
```

**ApprovalRecord 表 (t_approval_record)**
```
- instance (FK), node_id, node_name
- approver (FK)
- action: submit/approve/reject/transfer/add_approver/withdraw/urge/comment
- comment, attachments
```

**ApprovalTask 表 (t_approval_task)**
```
- instance (FK), node_id, node_name
- assign_type: user/role/department/applicant_select
- assignee (FK)
- status: pending/completed/transferred/cancelled
- due_time
```

**ApprovalCc 表 (t_approval_cc)**
```
- instance (FK), user (FK), node_id
- is_read, read_at
```

#### 工作流引擎 (WorkflowEngine)

核心方法：
- `start()`: 流程启动
- `approve()`: 审批通过
- `reject()`: 审批拒绝
- `transfer()`: 转交处理
- `add_approver()`: 加签处理

节点类型：
- single: 单人审批
- countersign: 会签（所有人同意）
- or_sign: 或签（任一人同意）
- cc: 抄送

### 2.6 审计监控 (audit模块)

#### 数据模型

**AuditLog 表 (t_audit_log)** - 操作审计
```
- user_id, user_name, ip_address, user_agent
- request_path, request_method
- request_body, response_code, duration
- module, action, resource_type, resource_id
- trace_id
```

**DataChangeLog 表 (t_data_change_log)** - 数据变更
```
- table_name, record_id
- action: insert/update/delete
- old_data, new_data, changes
- operator_id, trace_id
```

**LoginLog 表 (t_login_log)** - 登录日志
```
- user_id, login_type, ip_address
- location, device, browser, os
- status: success/failed, fail_reason
```

**AlertRule 表 (t_alert_rule)** - 告警规则
```
- name, metric_type, condition
- level: P0/P1/P2/P3
- notify_channels, notify_users
- cooldown_minutes, status
```

**AlertHistory 表 (t_alert_history)** - 告警历史
```
- rule (FK), level, title, content
- metric_value
- status: triggered/acknowledged/resolved
```

### 2.7 配置管理 (config模块)

#### 数据模型

**MetaTable 表 (t_meta_table)** - 元数据表定义
```
- name(唯一), display_name, description
- field_config (JSON, 13种字段类型)
- need_audit, need_history
- read_roles, write_roles
```

**ConfigHistory 表 (t_config_history)** - 配置历史
```
- table_name, record_id
- action: insert/update/delete/rollback
- version, old_data, new_data, changes
- operator (FK)
```

**SystemConfig 表 (t_system_config)** - 系统配置
```
- key(唯一), value (JSON)
- category: system/security/email/sms/storage/other
- is_encrypted, is_readonly
- effective_time
```

**ConfigApproval 表 (t_config_approval)** - 配置审批
```
- table_name, record_id
- action: insert/update/delete
- old_data, new_data
- status: pending/approved/rejected/cancelled
```

### 2.8 消息通知 (notification模块)

#### 数据模型

**MessageTemplate 表 (t_message_template)** - 消息模板
```
- code, name
- channel: email/sms/dingtalk/feishu/wechat/webhook/internal
- subject, content (支持变量: ${userName}, ${taskName})
- params (JSON)
```

**MessageLog 表 (t_message_log)** - 发送日志
```
- template (FK), channel
- recipient, subject, content
- status: pending/sent/failed
- retry_count, error_msg
- business_type, business_id
```

**Notification 表 (t_notification)** - 站内通知
```
- user (FK), title, content
- type: system/approval/task/alert/personal
- level: info/warning/error/success
- is_read, link_url
```

**ChannelConfig 表 (t_channel_config)** - 渠道配置
```
- channel(唯一): email/sms/dingtalk/feishu/wechat
- config (JSON, API密钥等)
- status, last_test_time
```

**UserNotificationSetting 表** - 用户通知设置
```
- user (FK), notification_type
- email_enabled, sms_enabled, im_enabled, internal_enabled
```

### 2.9 公共模块 (common)

**BaseModel (基类模型)**
```python
- created_at (自动创建时间)
- updated_at (自动更新时间)
- created_by (FK -> User, 创建人)
- updated_by (FK -> User, 更新人)
```

**SoftDeleteModel (软删除模型)**
```python
- is_deleted (软删除标志)
- deleted_at (删除时间)
- delete() 执行软删除
- hard_delete() 真正删除
```

**核心工具：**
- middleware.py: 获取当前用户/请求
- cache.py: Redis缓存工具
- pagination.py: 分页类
- renderers.py: 统一JSON响应格式
- exceptions.py: 自定义异常
- security.py: 安全中间件

---

## 3. 前端模块详细分析

### 3.1 目录结构

```
frontend/src/
├── api/                    # API接口层
│   ├── request.js         # Axios配置和拦截器
│   ├── index.js           # API导出
│   ├── auth.js            # 认证API
│   ├── audit.js           # 审计API
│   └── report.js          # 报表API
├── router/                 # 路由配置
│   └── index.js           # 路由定义和守卫
├── stores/                 # Pinia状态管理
│   └── user.js            # 用户状态
├── views/                  # 页面组件
│   ├── login/             # 登录页面
│   ├── layout/            # 主布局
│   ├── dashboard/         # 工作台
│   ├── system/            # 系统管理
│   ├── scheduler/         # 任务调度
│   ├── report/            # 报表模块
│   ├── config/            # 配置管理
│   ├── workflow/          # 工作流审批
│   ├── audit/             # 审计监控
│   ├── message/           # 消息管理
│   ├── notifications/     # 站内通知
│   └── error/             # 错误页面
├── components/            # 公共组件
├── assets/                # 静态资源
├── App.vue                # 根组件
└── main.js                # 入口文件
```

### 3.2 路由配置

```javascript
/login                    - 登录页面（无需认证）
/register                 - 注册页面（无需认证）
/sso/callback/:provider   - SSO回调（无需认证）
/                         - 主框架
  /dashboard              - 工作台
  /system/users           - 用户管理
  /system/roles           - 角色管理
  /scheduler/jobs         - 任务管理
  /scheduler/flows        - 工作流管理
  /report/list            - 报表列表
  /report/datasources     - 数据源管理
  /config/tables          - 配置管理
  /workflow/definitions   - 流程定义
  /workflow/todo          - 待办事项
  /audit/logs             - 操作日志
  /message/templates      - 消息模板
  /notifications          - 站内通知
/:pathMatch(.)*           - 404页面
```

**路由守卫：**
- 检查登录状态 (token)
- 未登录重定向登录页
- NProgress进度条
- 设置页面标题

### 3.3 API请求层

**Axios配置 (request.js)**
```javascript
- baseURL: '/api/v1'
- timeout: 30000ms
- 请求拦截: 注入 Authorization: Bearer ${token}
- 响应拦截:
  - code === 0: 返回 data
  - 401: 清除token，跳转登录
  - 403: 权限不足提示
  - 500: 服务器错误提示
```

**API模块：**
- auth.js: 登录、注册、SSO、MFA等
- audit.js: 日志查询、告警管理等
- report.js: 数据源、报表、订阅等

### 3.4 状态管理 (Pinia)

**user.js 存储：**
```javascript
// State
- token: 访问令牌
- userInfo: 用户信息
- permissions: 权限列表

// Getters
- isLoggedIn: 是否已登录
- username: 用户名

// Actions
- loginAction(): 登录
- logoutAction(): 登出
- fetchProfile(): 获取用户信息
- hasPermission(): 权限检查
```

### 3.5 页面组件

| 模块 | 页面 | 功能 |
|-----|------|-----|
| login | index.vue | 登录表单、SSO入口 |
| login | register.vue | 注册表单 |
| login | sso-callback.vue | SSO回调处理 |
| layout | index.vue | 主框架（菜单、顶栏） |
| dashboard | index.vue | 统计卡片、图表、待办 |
| system | users/ | 用户管理 |
| system | roles/ | 角色管理 |
| scheduler | jobs/ | 任务列表、执行日志 |
| scheduler | flows/ | 工作流管理、DAG编辑 |
| report | list/ | 报表列表、收藏分享 |
| report | datasources/ | 数据源管理 |
| config | tables/ | 动态配置表 |
| workflow | definitions/ | 流程设计器 |
| workflow | todo/ | 待办事项 |
| audit | logs/ | 操作日志 |
| message | templates/ | 消息模板 |
| notifications | index.vue | 通知列表 |

---

## 4. 数据库设计

### 4.1 数据表统计

| 模块 | 表数量 | 主要表 |
|-----|--------|--------|
| auth | 5 | User, Department, Role, Permission |
| scheduler | 6 | Job, JobFlow, JobFlowNode, JobLog, FlowInstance, JobAlert |
| report | 4 | DataSource, Report, ReportSubscription, ReportFavorite |
| workflow | 5 | WorkflowDefinition, ApprovalInstance, ApprovalRecord, ApprovalTask, ApprovalCc |
| audit | 6 | AuditLog, DataChangeLog, LoginLog, AlertRule, AlertHistory |
| config | 4 | MetaTable, ConfigHistory, SystemConfig, ConfigApproval |
| notification | 7 | MessageTemplate, MessageLog, Notification, ChannelConfig, UserNotificationSetting, Blacklist |
| **总计** | **36** | - |

### 4.2 数据库优化

- 所有关键字段添加索引
- UTF-8MB4字符集（支持emoji）
- JSON字段存储灵活配置
- django-simple-history记录变更历史
- 软删除支持

---

## 5. 核心业务流程

### 5.1 用户登录认证流程

```
1. 用户输入用户名密码
   └─> POST /api/v1/auth/login/

2. LoginView验证
   ├─ 查询User记录
   ├─ 验证密码
   ├─ 生成JWT Tokens
   └─ 返回tokens和用户信息

3. 前端接收响应
   ├─ 保存token到localStorage
   ├─ 调用fetchProfile()获取权限
   └─ 跳转到Dashboard

4. 后续请求
   ├─ 自动携带Authorization header
   └─ 后端RBACPermission检查权限
```

### 5.2 定时任务执行流程

```
1. 创建定时任务（含Cron表达式）
   └─> SchedulerService.sync_job_schedule()
       └─> 创建Celery Beat PeriodicTask

2. Celery Beat 定时触发
   └─> execute_job Celery Task

3. Worker 执行任务
   ├─ 生成trace_id
   ├─ 创建JobLog记录
   ├─ 根据job_type执行
   │   ├─ http: HTTP接口调用
   │   ├─ shell: Shell脚本执行
   │   ├─ sql: SQL查询执行
   │   └─ python: Python代码执行
   └─> 更新JobLog状态

4. 失败触发告警
   ├─ 创建JobAlert记录
   └─> 多渠道发送通知
```

### 5.3 工作流审批流程

```
1. 提交审批申请
   └─> WorkflowEngine.start()
       ├─ 创建ApprovalInstance
       ├─ 创建ApprovalTask
       └─> 通知审批人

2. 审批人处理
   └─> WorkflowEngine.approve()
       ├─ 更新ApprovalTask
       ├─ 创建ApprovalRecord
       └─> 推进下一节点

3. 流程完成
   ├─ 更新ApprovalInstance状态
   ├─ 触发业务回调
   └─> 通知申请人
```

---

## 6. 开发进度

### 6.1 功能模块状态

| 模块 | 功能 | 状态 | 进度 |
|-----|------|------|------|
| M1 | 登录鉴权中心 | 开发中 | 60% |
| M2 | 智能调度中心 | 开发中 | 70% |
| M3 | 低代码报表引擎 | 规划中 | 30% |
| M4 | 通用配置中心 | 规划中 | 30% |
| M5 | 流程审批中心 | 规划中 | 40% |
| M6 | 全局审计监控 | 规划中 | 30% |
| M7 | 消息通知中心 | 规划中 | 40% |

### 6.2 已完成功能

**后端：**
- 用户认证（密码登录、JWT Token）
- RBAC权限系统
- 数据权限控制
- SSO框架
- MFA多因素认证
- 任务定义和执行框架
- 工作流引擎
- 报表和数据源模型
- 配置管理框架
- 审计和告警模型
- 通知模板和渠道模型

**前端：**
- 登录页面
- 路由和导航框架
- Pinia状态管理
- API请求层
- 11个模块页面框架
- Dashboard工作台基础

### 6.3 待实现功能

**后端：**
- Celery任务执行完整实现
- 报表数据查询引擎
- 多渠道消息发送
- 审计日志自动收集
- 告警规则引擎
- 配置版本控制和回滚

**前端：**
- 业务页面完整实现
- 权限控制UI隐藏
- 搜索筛选排序
- 批量操作
- 导入导出
- WebSocket实时通知

---

## 7. 部署和运维

### 7.1 Docker部署

```bash
# 开发环境
docker-compose up -d

# 生产环境
docker-compose -f docker-compose.prod.yml up -d
```

### 7.2 访问地址

- 前端: http://localhost:5173
- 后端API: http://localhost:8000
- API文档: http://localhost:8000/api/docs/swagger/

### 7.3 数据库迁移

```bash
python manage.py makemigrations
python manage.py migrate
python manage.py createsuperuser
```

---

## 8. 技术特点

### 8.1 架构优势

1. **完整的企业级架构** - 前后端分离、微服务就绪、分布式追踪
2. **强大的权限管理** - RBAC、数据权限、SSO、MFA
3. **灵活的任务调度** - 定时任务、DAG工作流、重试机制
4. **可视化工作流** - 流程设计器、多种审批方式
5. **灵活的配置管理** - 动态配置、版本控制、审批发布
6. **完善的审计监控** - 操作日志、数据变更、告警规则
7. **多渠道通知** - 邮件、短信、企业IM、站内通知

### 8.2 安全性

- JWT Token认证
- RBAC权限检查
- 数据权限隔离
- SQL注入防护（Django ORM）
- CSRF/XSS防护
- API请求限流
- 密码哈希存储
- 敏感数据加密

### 8.3 可扩展性

- 模块化架构设计
- 插件化支持（新任务类型、新通知渠道）
- 微服务就绪
- 容器化部署
- Kubernetes支持

---

## 总结

OPS智能运营系统是一个功能完整、架构规范的企业级运维管理平台。系统采用Django + Vue技术栈，具备完善的用户认证、任务调度、报表引擎、工作流审批、审计监控、配置管理、消息通知等核心功能。

系统设计遵循企业级标准，支持高可用部署，具备良好的扩展性和安全性，适合作为企业运维平台的基础进行二次开发和定制。
